
#include <GL/glut.h>
#include <math.h>
#include <iostream>

const int WIDTH = 900;
const int HEIGHT = 650;

float fanAngle = 0.0f;

void drawPixel(int x, int y) {
    glBegin(GL_POINTS);
    glVertex2i(x, y);
    glEnd();
}

void drawLineDDA(float x1, float y1, float x2, float y2) {
    float dx = x2 - x1;
    float dy = y2 - y1;
    float steps = (abs(dx) > abs(dy)) ? abs(dx) : abs(dy);
    float xInc = dx / steps;
    float yInc = dy / steps;
    float x = x1;
    float y = y1;

    for (int i = 0; i <= steps; i++) {
        drawPixel(round(x), round(y));
        x += xInc;
        y += yInc;
    }
}

void drawCircleMidpoint(int xc, int yc, int r) {
    int x = 0;
    int y = r;
    int p = 1 - r;

    auto plotPoints = [&](int x, int y) {
        drawPixel(xc + x, yc + y); drawPixel(xc - x, yc + y);
        drawPixel(xc + x, yc - y); drawPixel(xc - x, yc - y);
        drawPixel(xc + y, yc + x); drawPixel(xc - y, yc + x);
        drawPixel(xc + y, yc - x); drawPixel(xc - y, yc - x);
        };

    plotPoints(x, y);
    while (x < y) {
        x++;
        if (p < 0) p += 2 * x + 1;
        else { y--; p += 2 * x - 2 * y + 1; }
        plotPoints(x, y);
    }
}

void drawBottle(float x, float y) {
    glColor3f(0.5f, 0.3f, 0.1f);
    glRectf(x, y, x + 12, y + 25);

    glColor3f(0.6f, 0.4f, 0.2f);
    glRectf(x + 4, y + 25, x + 8, y + 35);

    glColor3f(0.1f, 0.1f, 0.1f);
    glRectf(x + 3.5, y + 35, x + 8.5, y + 38);

    glColor3f(0.9f, 0.9f, 0.8f);
    glRectf(x + 1, y + 5, x + 11, y + 18);

    glColor3f(0.6f, 0.1f, 0.1f);
    glRectf(x + 1, y + 10, x + 11, y + 12);
}

void drawSofa(float r, float g, float b) {
    glColor3f(0.2f, 0.2f, 0.2f);
    glRectf(-55, -20, -45, 0);
    glRectf(45, -20, 55, 0);

    glColor3f(r * 0.8, g * 0.8, b * 0.8);
    glRectf(-80, 0, 80, 25);

    glColor3f(r, g, b);
    glRectf(-70, 25, -2, 45);
    glRectf(2, 25, 70, 45);

    glColor3f(r * 0.9, g * 0.9, b * 0.9);
    glRectf(-80, 45, 80, 90);

    glColor3f(r * 1.1, g * 1.1, b * 1.1);
    glRectf(-90, 0, -80, 55);
    glRectf(80, 0, 90, 55);

    glColor3f(0.1f, 0.1f, 0.1f);
    drawLineDDA(-80, 45, 80, 45);
}

void drawFloorLamp() {
    glColor3f(0.2f, 0.2f, 0.2f); glRectf(-15, -100, 15, -90);
    glColor3f(0.6f, 0.6f, 0.6f); glRectf(-3, -90, 3, 120);
    glColor3f(1.0f, 1.0f, 0.6f); drawCircleMidpoint(0, 140, 35);

    glColor3f(0.9f, 0.5f, 0.2f);
    glBegin(GL_POLYGON);
    glVertex2f(-20, 120); glVertex2f(20, 120);
    glVertex2f(15, 160); glVertex2f(-15, 160);
    glEnd();
}

void drawPoster(float r, float g, float b) {
    glColor3f(1.0f, 1.0f, 1.0f); glRectf(-30, -40, 30, 40);
    glColor3f(r, g, b); glRectf(-25, -35, 25, 35);
    glColor3f(r * 0.5, g * 0.5, b * 0.5); drawCircleMidpoint(0, 0, 15);
}

void drawPedestalFan() {
    glColor3f(0.3f, 0.3f, 0.35f);
    drawCircleMidpoint(0, -90, 30);

    glRectf(-25, -90, 25, -80);

    glColor3f(0.6f, 0.6f, 0.65f);
    glRectf(-4, -80, 4, 20);

    glTranslatef(0, 30, 0);

    glColor3f(0.3f, 0.3f, 0.35f);
    drawCircleMidpoint(0, 0, 10);

    glPushMatrix();
    glRotatef(fanAngle, 0, 0, 1);

    glColor3f(0.2f, 0.8f, 1.0f);
    for (int i = 0; i < 3; i++) {
        glPushMatrix();
        glRotatef(i * 120, 0, 0, 1);
        glBegin(GL_POLYGON);
        glVertex2f(0, 0); glVertex2f(-10, 25); glVertex2f(0, 45); glVertex2f(10, 25);
        glEnd();
        glPopMatrix();
    }
    glPopMatrix();

    glColor3f(0.8f, 0.8f, 0.8f);
    drawCircleMidpoint(0, 0, 50);
    drawLineDDA(-50, 0, 50, 0);
    drawLineDDA(0, -50, 0, 50);
}

void drawPCSetup() {
    glColor3f(0.2f, 0.2f, 0.2f);
    glRectf(-80, 10, 80, 90);

    glColor3f(0.0f, 1.0f, 1.0f);
    drawLineDDA(-80, 10, 80, 10);
    drawLineDDA(-80, 90, 80, 90);

    glColor3f(0.2f, 0.2f, 0.2f);
    glRectf(-10, 0, 10, 10);
    glRectf(-30, -5, 30, 0);

    glColor3f(0.15f, 0.15f, 0.2f);
    glRectf(90, -5, 140, 95);

    glColor3f(1.0f, 0.0f, 0.8f);
    drawLineDDA(95, 0, 95, 90);

    glColor3f(0.0f, 0.8f, 1.0f);
    drawLineDDA(135, 0, 135, 90);

    glColor3f(0.1f, 0.1f, 0.15f);
    glRectf(-100, -20, 150, -5);

    glColor3f(1.0f, 0.4f, 0.0f);
    drawLineDDA(-100, -20, 150, -20);

    glColor3f(0.4f, 0.4f, 0.45f);
    glRectf(-90, -100, -80, -20);
    glRectf(130, -100, 140, -20);

    drawBottle(-95, -5);

    glColor3f(1.0f, 1.0f, 1.0f);
    glRasterPos2f(-60, 45);
    std::string name = "Sagor Majumder";
    for (char c : name) {
        glutBitmapCharacter(GLUT_BITMAP_HELVETICA_18, c);
    }
}

void drawBed() {
    glColor3f(0.3f, 0.2f, 0.1f);
    glRectf(0, -50, 15, -30);
    glRectf(330, -50, 345, -30);

    glColor3f(0.4f, 0.3f, 0.2f);
    glRectf(-5, -30, 330, -10);

    glColor3f(0.8f, 0.8f, 0.85f);
    glRectf(0, -10, 330, 20);

    glColor3f(0.2f, 0.4f, 0.7f);
    glRectf(0, -10, 220, 20);

    glColor3f(0.9f, 0.9f, 0.9f);
    glRectf(250, 20, 320, 55);

    glColor3f(0.35f, 0.25f, 0.15f);
    glRectf(325, -10, 345, 70);
}

void drawGamingChair() {

    glColor3f(0.1f, 0.1f, 0.1f);
    drawCircleMidpoint(-25, -5, 6);
    drawCircleMidpoint(25, -5, 6);

    glColor3f(0.75f, 0.75f, 0.75f);
    glRectf(-30, 0, 30, 5);
    glRectf(-5, 5, 5, 35);

    glColor3f(0.1f, 0.1f, 0.15f);
    glRectf(-35, 35, 35, 55);

    glColor3f(0.1f, 0.1f, 0.15f);
    glBegin(GL_POLYGON);
    glVertex2f(-30, 55); glVertex2f(30, 55);
    glVertex2f(25, 125); glVertex2f(-25, 125);
    glEnd();

    glColor3f(0.0f, 1.0f, 0.0f);
    drawLineDDA(-30, 55, -25, 125);
    drawLineDDA(30, 55, 25, 125);

    glColor3f(0.1f, 0.1f, 0.15f);
    glRectf(-18, 125, 18, 145);
}

void drawShelf() {
    glColor3f(0.5f, 0.4f, 0.3f); glRectf(-80, 0, 80, 8);
    glColor3f(0.8f, 0.2f, 0.2f); glRectf(-60, 8, -50, 35);
    glColor3f(0.2f, 0.8f, 0.2f); glRectf(-48, 8, -30, 30);
    glColor3f(0.2f, 0.2f, 0.8f); glRectf(-28, 8, 0, 40);
}

void display() {
    glClear(GL_COLOR_BUFFER_BIT);
    glLoadIdentity();

    glBegin(GL_QUADS);
    glColor3f(0.3f, 0.3f, 0.35f);
    glVertex2f(-450, -100); glVertex2f(450, -100);
    glVertex2f(450, 325); glVertex2f(-450, 325);

    glColor3f(0.2f, 0.2f, 0.25f);
    glVertex2f(-450, -325); glVertex2f(450, -325);
    glVertex2f(450, -100); glVertex2f(-450, -100);
    glEnd();

    glColor3f(0.1f, 0.1f, 0.1f);
    drawLineDDA(-450, -100, 450, -100);

    glPushMatrix(); glTranslatef(-250, 200, 0); drawPoster(1.0, 0.2, 0.5); glPopMatrix();
    glPushMatrix(); glTranslatef(0, 200, 0); drawPoster(0.2, 1.0, 0.5); glPopMatrix();
    glPushMatrix(); glTranslatef(250, 200, 0); drawPoster(0.2, 0.5, 1.0); glPopMatrix();
    glPushMatrix(); glTranslatef(-250, 100, 0); drawShelf(); glPopMatrix();

    glPushMatrix(); glTranslatef(-300, 0, 0); drawPCSetup(); glPopMatrix();
    glPushMatrix(); glTranslatef(-300, -150, 0); glScalef(1.2, 1.2, 1); drawGamingChair(); glPopMatrix();

    glPushMatrix(); glTranslatef(120, -150, 0); drawBed(); glPopMatrix();

    glPushMatrix(); glTranslatef(-50, -100, 0); drawSofa(0.0f, 0.6f, 0.6f); glPopMatrix();
    glPushMatrix(); glTranslatef(100, -100, 0); drawSofa(0.5f, 0.4f, 0.6f); glPopMatrix();

    glPushMatrix(); glTranslatef(380, -80, 0); drawFloorLamp(); glPopMatrix();

    glPushMatrix(); glTranslatef(0, -100, 0); glScalef(0.8, 0.8, 1); drawPedestalFan(); glPopMatrix();

    glFlush();
}

void timer(int value) {
    fanAngle -= 5.0f;
    if (fanAngle < 0) fanAngle += 360;
    glutPostRedisplay();
    glutTimerFunc(16, timer, 0);
}

void init() {
    glClearColor(0.2f, 0.2f, 0.25f, 1.0f);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(-450, 450, -325, 325);
    glMatrixMode(GL_MODELVIEW);
}

int main(int argc, char** argv) {
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(WIDTH, HEIGHT);
    glutCreateWindow("Bedroom Updated - Sagor Majumder");

    init();
    glutDisplayFunc(display);
    glutTimerFunc(0, timer, 0);
    glutMainLoop();
    return 0;
}





